åœ¨ **Next.js** ä¸­ï¼Œ**æ–‡ä»¶å¤¹è·¯ç”±ï¼ˆFile-based Routingï¼‰** æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸ä½ **é€šè¿‡é¡¹ç›®ä¸­çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„è‡ªåŠ¨åˆ›å»ºé¡µé¢è·¯ç”±ï¼ˆURL è·¯å¾„ï¼‰**ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®è·¯ç”±è¡¨ã€‚

ä» Next.js 13 å¼€å§‹ï¼Œå®˜æ–¹ä¸»æ¨ **App Router**ï¼ˆåŸºäº React Server Componentsï¼‰ï¼ŒåŒæ—¶ä»æ”¯æŒæ—§çš„ **Pages Router**ã€‚ä¸‹é¢é‡ç‚¹ä»‹ç» **App Router ä¸‹çš„æ–‡ä»¶å¤¹è·¯ç”±æœºåˆ¶**ï¼ˆæ¨èä½¿ç”¨ï¼‰ã€‚

---

## ğŸ“ ä¸€ã€åŸºç¡€ï¼šApp Router çš„ç›®å½•ç»“æ„

å¯ç”¨ App Router éœ€åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `app/` æ–‡ä»¶å¤¹ï¼š

```
my-app/
â”œâ”€â”€ app/                â† è·¯ç”±å…¥å£ï¼ˆApp Routerï¼‰
â”‚   â”œâ”€â”€ layout.tsx      â† æ ¹å¸ƒå±€ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ page.tsx        â† é¦–é¡µ â†’ /
â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â””â”€â”€ page.tsx    â† /about
â”‚   â””â”€â”€ blog/
â”‚       â””â”€â”€ [slug]/
â”‚           â””â”€â”€ page.tsx â† /blog/helloï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
â”œâ”€â”€ public/             â† é™æ€èµ„æº
â””â”€â”€ package.json
```

> âœ… **è§„åˆ™ï¼šæ¯ä¸ªè·¯ç”±å¿…é¡»åŒ…å«ä¸€ä¸ª `page.tsx`ï¼ˆæˆ– `.js`ï¼‰æ–‡ä»¶**

---

## ğŸ”‘ äºŒã€æ ¸å¿ƒè·¯ç”±è§„åˆ™

### 1. **é™æ€è·¯ç”±ï¼ˆStatic Routesï¼‰**

æ–‡ä»¶è·¯å¾„ç›´æ¥æ˜ å°„ä¸º URLï¼š

| æ–‡ä»¶è·¯å¾„                         | å¯¹åº” URL           |
| ---------------------------- | ---------------- |
| `app/page.tsx`               | `/`              |
| `app/about/page.tsx`         | `/about`         |
| `app/products/list/page.tsx` | `/products/list` |

> ğŸ’¡ æ–‡ä»¶å¤¹å = URL è·¯å¾„æ®µï¼Œ`page.tsx` æ˜¯è¯¥è·¯å¾„çš„â€œé¡µé¢ç»„ä»¶â€ã€‚

---

### 2. **åŠ¨æ€è·¯ç”±ï¼ˆDynamic Routesï¼‰**

ç”¨ **æ–¹æ‹¬å· `[param]`** å®šä¹‰åŠ¨æ€æ®µï¼š

```bash
app/user/[id]/page.tsx   â†’ åŒ¹é… /user/123, /user/abc
```

åœ¨ç»„ä»¶ä¸­è·å–å‚æ•°ï¼š

```tsx
// app/user/[id]/page.tsx
export default function UserPage({ params }: { params: { id: string } }) {
  return <h1>User ID: {params.id}</h1>;
}
```

#### å¤šå‚æ•°ç¤ºä¾‹ï¼š

```
app/shop/[category]/[product]/page.tsx
â†’ /shop/electronics/phone
â†’ params = { category: 'electronics', product: 'phone' }
```

---

### 3. **Catch-all è·¯ç”±ï¼ˆæ•è·æ‰€æœ‰è·¯å¾„ï¼‰**

- **éç©ºåŒ¹é…**ï¼š`[...slug]`
    
    ```bash
    app/post/[...slug]/page.tsx
    ```
    
    - `/post/a` â†’ `params.slug = ['a']`
    - `/post/a/b/c` â†’ `params.slug = ['a', 'b', 'c']`
- **å¯é€‰åŒ¹é…ï¼ˆåŒ…æ‹¬ç©ºï¼‰**ï¼š`[[...slug]]`
    
    - `/post` â†’ `params.slug = undefined`
    - `/post/hello` â†’ `params.slug = ['hello']`

> âš ï¸ æ³¨æ„ï¼šCatch-all å¿…é¡»æ˜¯è·¯å¾„çš„æœ€åä¸€æ®µã€‚

---

## ğŸ§± ä¸‰ã€ç‰¹æ®Šæ–‡ä»¶ï¼ˆå¢å¼ºè·¯ç”±åŠŸèƒ½ï¼‰

Next.js App Router æ”¯æŒå¤šç§**çº¦å®šå¼æ–‡ä»¶å**ï¼Œç”¨äºæ‰©å±•è·¯ç”±è¡Œä¸ºï¼š

|æ–‡ä»¶å|ä½œç”¨|ç¤ºä¾‹|
|---|---|---|
|`layout.tsx`|**å…±äº«å¸ƒå±€**ï¼ˆåµŒå¥— UIï¼‰|å¯¼èˆªæ ã€é¡µè„š|
|`loading.tsx`|**åŠ è½½çŠ¶æ€**ï¼ˆè‡ªåŠ¨åŒ…è£¹ Suspenseï¼‰|éª¨æ¶å±|
|`error.tsx`|**é”™è¯¯è¾¹ç•Œ**ï¼ˆæ•è·å­æ ‘é”™è¯¯ï¼‰|é”™è¯¯æç¤ºé¡µ|
|`not-found.tsx`|**404 é¡µé¢**|è‡ªå®šä¹‰æœªæ‰¾åˆ°é¡µé¢|
|`route.ts`|**API è·¯ç”±**ï¼ˆæ›¿ä»£ `pages/api`ï¼‰|å¤„ç† POST/GET è¯·æ±‚|

### ç¤ºä¾‹ï¼šå¸¦å¸ƒå±€å’ŒåŠ è½½çŠ¶æ€çš„åšå®¢

```
app/blog/
â”œâ”€â”€ layout.tsx      â†’ æ‰€æœ‰ /blog/* å…±äº«çš„ä¾§è¾¹æ 
â”œâ”€â”€ loading.tsx     â†’ åŠ è½½æ—¶æ˜¾ç¤ºéª¨æ¶å±
â”œâ”€â”€ not-found.tsx   â†’ åšå®¢æ–‡ç« ä¸å­˜åœ¨æ—¶æ˜¾ç¤º
â”œâ”€â”€ page.tsx        â†’ /blog åˆ—è¡¨é¡µ
â””â”€â”€ [slug]/
    â”œâ”€â”€ loading.tsx â†’ å•ç¯‡æ–‡ç« åŠ è½½çŠ¶æ€
    â””â”€â”€ page.tsx    â†’ /blog/hello-world
```

---

## ğŸ”„ å››ã€è·¯ç”±ç»„ï¼ˆRoute Groupsï¼‰â€” ä¸å½±å“ URL

ç”¨ **åœ†æ‹¬å· `( )`** åˆ›å»ºé€»è¾‘åˆ†ç»„ï¼Œ**ä¸ä¼šå‡ºç°åœ¨ URL ä¸­**ï¼š

```bash
app/
â”œâ”€â”€ (marketing)/
â”‚   â”œâ”€â”€ page.tsx        â†’ /
â”‚   â””â”€â”€ about/page.tsx  â†’ /about
â””â”€â”€ (dashboard)/
    â””â”€â”€ settings/page.tsx â†’ /settings
```

### ç”¨é€”ï¼š

- ä¸ºä¸åŒè·¯ç”±ç»„åº”ç”¨**ä¸åŒæ ¹å¸ƒå±€**
- å®ç°**æƒé™éš”ç¦»**ï¼ˆå¦‚æ¸¸å®¢ vs ç®¡ç†å‘˜ï¼‰
- ç»„ç»‡ä»£ç ç»“æ„ï¼Œä¸å½±å“æœ€ç»ˆ URL

---

## ğŸ§© äº”ã€å¹¶è¡Œè·¯ç”±ï¼ˆParallel Routesï¼‰â€” é«˜çº§ç”¨æ³•

é€šè¿‡ `@folder` è¯­æ³•åœ¨åŒä¸€å±‚çº§æ¸²æŸ“å¤šä¸ªç‹¬ç«‹ UI åŒºåŸŸï¼ˆå¦‚æ¨¡æ€æ¡†ï¼‰ï¼š

```
app/
â”œâ”€â”€ @modal/             â† æ¨¡æ€æ¡†åŒºåŸŸ
â”‚   â””â”€â”€ default.tsx     â†’ é»˜è®¤ç©ºå†…å®¹
â”œâ”€â”€ layout.tsx          â† ä½¿ç”¨ <slot> å’Œ <modal> å¹¶è¡Œæ¸²æŸ“
â””â”€â”€ settings/
    â””â”€â”€ page.tsx        â†’ ä¸»å†…å®¹
```

> é€‚ç”¨äºå¤æ‚äº¤äº’åœºæ™¯ï¼ˆå¦‚ `/settings?modal=profile`ï¼‰ã€‚

---

## âš™ï¸ å…­ã€ä¸ Pages Router çš„åŒºåˆ«ï¼ˆç®€è¦ï¼‰

|ç‰¹æ€§|App Router (`app/`)|Pages Router (`pages/`)|
|---|---|---|
|è·¯ç”±æ–‡ä»¶|`page.tsx`|`*.tsx`ï¼ˆæ–‡ä»¶åå³è·¯å¾„ï¼‰|
|å¸ƒå±€|`layout.tsx`ï¼ˆåµŒå¥—ç»§æ‰¿ï¼‰|é€šè¿‡ `_app.tsx` å…¨å±€å¸ƒå±€|
|æ•°æ®è·å–|åœ¨ç»„ä»¶å†…ç›´æ¥ `async/await`|éœ€ `getStaticProps` / `getServerSideProps`|
|ç»„ä»¶ç±»å‹|é»˜è®¤æœåŠ¡ç«¯ç»„ä»¶ï¼ˆé›¶å®¢æˆ·ç«¯ JSï¼‰|å…¨æ˜¯å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆé™¤é SSRï¼‰|
|API è·¯ç”±|`route.ts`ï¼ˆåœ¨ `app/` å†…ï¼‰|`pages/api/`|

> âœ… **æ–°é¡¹ç›®å¼ºçƒˆæ¨èä½¿ç”¨ App Router**

---

## âœ… æœ€ä½³å®è·µå»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨ App Router**ï¼ˆNext.js å®˜æ–¹æœªæ¥æ–¹å‘ï¼‰
2. **åˆç†æ‹†åˆ† layout**ï¼šé¿å…é‡å¤ä»£ç 
3. **åŠ¨æ€è·¯ç”±å‘½åæ¸…æ™°**ï¼šå¦‚ `[userId]` æ¯” `[id]` æ›´è¯­ä¹‰åŒ–
4. **é…åˆ loading/error æ–‡ä»¶**ï¼šæå‡ç”¨æˆ·ä½“éªŒ
5. **ç”¨è·¯ç”±ç»„ç®¡ç†æƒé™é¡µé¢**ï¼šå¦‚ `(auth)/dashboard`, `(public)/login`

---

## ğŸ¯ æ€»ç»“

> **Next.js çš„æ–‡ä»¶å¤¹è·¯ç”± = â€œæ–‡ä»¶ç³»ç»Ÿå³è·¯ç”±é…ç½®â€**  
> é€šè¿‡ `app/` ç›®å½•ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼Œä½ å¯ä»¥ï¼š
> 
> - è‡ªåŠ¨ç”Ÿæˆé™æ€/åŠ¨æ€è·¯ç”±
> - åµŒå¥—å…±äº«å¸ƒå±€
> - æ·»åŠ åŠ è½½ã€é”™è¯¯ã€404 çŠ¶æ€
> - å®ç°é«˜çº§è·¯ç”±æ¨¡å¼ï¼ˆç»„ã€å¹¶è¡Œç­‰ï¼‰

è¿™ç§**çº¦å®šä¼˜äºé…ç½®**çš„è®¾è®¡ï¼Œæå¤§ç®€åŒ–äº†è·¯ç”±ç®¡ç†ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„ Next.js åº”ç”¨çš„åŸºç¡€ã€‚